\hypertarget{union__hw__can__ecr}{}\section{\+\_\+hw\+\_\+can\+\_\+ecr Union Reference}
\label{union__hw__can__ecr}\index{\+\_\+hw\+\_\+can\+\_\+ecr@{\+\_\+hw\+\_\+can\+\_\+ecr}}


H\+W\+\_\+\+C\+A\+N\+\_\+\+E\+CR -\/ Error Counter (RW)  




{\ttfamily \#include $<$M\+K64\+F12\+\_\+can.\+h$>$}

\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{struct__hw__can__ecr_1_1__hw__can__ecr__bitfields}{\+\_\+hw\+\_\+can\+\_\+ecr\+\_\+bitfields}
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
uint32\+\_\+t {\bfseries U}\hypertarget{union__hw__can__ecr_ab8ef8aab31139ea76345b01f48ffb86b}{}\label{union__hw__can__ecr_ab8ef8aab31139ea76345b01f48ffb86b}

\item 
struct \hyperlink{struct__hw__can__ecr_1_1__hw__can__ecr__bitfields}{\+\_\+hw\+\_\+can\+\_\+ecr\+::\+\_\+hw\+\_\+can\+\_\+ecr\+\_\+bitfields} {\bfseries B}\hypertarget{union__hw__can__ecr_acd68cb6f405a5c1c398427d9b9ec4ea5}{}\label{union__hw__can__ecr_acd68cb6f405a5c1c398427d9b9ec4ea5}

\end{DoxyCompactItemize}


\subsection{Detailed Description}
H\+W\+\_\+\+C\+A\+N\+\_\+\+E\+CR -\/ Error Counter (RW) 

Reset value\+: 0x00000000U

This register has two 8-\/bit fields reflecting the value of two Flex\+C\+AN error counters\+: Transmit Error Counter (T\+X\+E\+R\+R\+C\+NT field) and Receive Error Counter (R\+X\+E\+R\+R\+C\+NT field). The rules for increasing and decreasing these counters are described in the C\+AN protocol and are completely implemented in the Flex\+C\+AN module. Both counters are read-\/only except in Freeze mode, where they can be written by the C\+PU. Flex\+C\+AN responds to any bus state as described in the protocol, for example, transmit Error Active or Error Passive flag, delay its transmission start time (Error Passive) and avoid any influence on the bus when in Bus Off state. The following are the basic rules for Flex\+C\+AN bus state transitions\+: If the value of T\+X\+E\+R\+R\+C\+NT or R\+X\+E\+R\+R\+C\+NT increases to be greater than or equal to 128, the F\+L\+T\+C\+O\+NF field in the Error and Status Register is updated to reflect \textquotesingle{}Error Passive\textquotesingle{} state. If the Flex\+C\+AN state is \textquotesingle{}Error Passive\textquotesingle{}, and either T\+X\+E\+R\+R\+C\+NT or R\+X\+E\+R\+R\+C\+NT decrements to a value less than or equal to 127 while the other already satisfies this condition, the F\+L\+T\+C\+O\+NF field in the Error and Status Register is updated to reflect \textquotesingle{}Error Active\textquotesingle{} state. If the value of T\+X\+E\+R\+R\+C\+NT increases to be greater than 255, the F\+L\+T\+C\+O\+NF field in the Error and Status Register is updated to reflect \textquotesingle{}Bus Off\textquotesingle{} state, and an interrupt may be issued. The value of T\+X\+E\+R\+R\+C\+NT is then reset to zero. If Flex\+C\+AN is in \textquotesingle{}Bus Off\textquotesingle{} state, then T\+X\+E\+R\+R\+C\+NT is cascaded together with another internal counter to count the 128th occurrences of 11 consecutive recessive bits on the bus. Hence, T\+X\+E\+R\+R\+C\+NT is reset to zero and counts in a manner where the internal counter counts 11 such bits and then wraps around while incrementing the T\+X\+E\+R\+R\+C\+NT. When T\+X\+E\+R\+R\+C\+NT reaches the value of 128, the F\+L\+T\+C\+O\+NF field in the Error and Status Register is updated to be \textquotesingle{}Error Active\textquotesingle{} and both error counters are reset to zero. At any instance of dominant bit following a stream of less than 11 consecutive recessive bits, the internal counter resets itself to zero without affecting the T\+X\+E\+R\+R\+C\+NT value. If during system start-\/up, only one node is operating, then its T\+X\+E\+R\+R\+C\+NT increases in each message it is trying to transmit, as a result of acknowledge errors (indicated by the A\+C\+K\+E\+RR bit in the Error and Status Register). After the transition to \textquotesingle{}Error Passive\textquotesingle{} state, the T\+X\+E\+R\+R\+C\+NT does not increment anymore by acknowledge errors. Therefore the device never goes to the \textquotesingle{}Bus Off\textquotesingle{} state. If the R\+X\+E\+R\+R\+C\+NT increases to a value greater than 127, it is not incremented further, even if more errors are detected while being a receiver. At the next successful message reception, the counter is set to a value between 119 and 127 to resume to \textquotesingle{}Error Active\textquotesingle{} state. 

The documentation for this union was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
/home/erik/proj/piranha/code/piranha-\/ptc/src/receiver/mbed/\+T\+A\+R\+G\+E\+T\+\_\+\+K64\+F/\+T\+A\+R\+G\+E\+T\+\_\+\+Freescale/\+T\+A\+R\+G\+E\+T\+\_\+\+K\+P\+S\+D\+K\+\_\+\+M\+C\+U\+S/\+T\+A\+R\+G\+E\+T\+\_\+\+M\+C\+U\+\_\+\+K64\+F/device/device/\+M\+K64\+F12/M\+K64\+F12\+\_\+can.\+h\end{DoxyCompactItemize}
