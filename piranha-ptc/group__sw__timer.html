<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Piranha Protocol: Software Timer</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Piranha Protocol
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Software Timer</div>  </div>
</div><!--header-->
<div class="contents">

<p>This module is used to interface with Abstract Timer HAL to generate periodical timeouts required through different modules of the AOA protocol. This block will be based on 1ms ticks for all the timeout calculations. The HAL Interface block used to communicate with this must have the same 1ms timeout configured. This module can generate different software timer channels based on the same 1ms.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga11c8ba265a273d5d3dda5e269163d3e7"><td class="memItemLeft" align="right" valign="top">typedef enum <a class="el" href="group__sw__timer.html#ga44b572e8abe4da32037ad911b133f0be">SwTimerChannelStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sw__timer.html#ga11c8ba265a273d5d3dda5e269163d3e7">sw_timer_channel_status_t</a></td></tr>
<tr class="separator:ga11c8ba265a273d5d3dda5e269163d3e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga85b49889ff28c6bc6a5368a08b0f9650"><td class="memItemLeft" align="right" valign="top">typedef int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sw__timer.html#ga85b49889ff28c6bc6a5368a08b0f9650">time_counter_t</a></td></tr>
<tr class="separator:ga85b49889ff28c6bc6a5368a08b0f9650"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf131d055058588461e646ccea72592bc"><td class="memItemLeft" align="right" valign="top">typedef uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sw__timer.html#gaf131d055058588461e646ccea72592bc">time_free_counter_t</a></td></tr>
<tr class="separator:gaf131d055058588461e646ccea72592bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga44b572e8abe4da32037ad911b133f0be"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sw__timer.html#ga44b572e8abe4da32037ad911b133f0be">SwTimerChannelStatus</a> { <a class="el" href="group__sw__timer.html#gga44b572e8abe4da32037ad911b133f0beaccc7b14e60e47ddac04fd489a4d17cf0">kSwTimerChannelExpired</a> = 0x00, 
<a class="el" href="group__sw__timer.html#gga44b572e8abe4da32037ad911b133f0bea52d9aacf178b2dcb1bb96a73b5dac3ef">kSwTimerChannelStillCounting</a> = 0x01, 
<a class="el" href="group__sw__timer.html#gga44b572e8abe4da32037ad911b133f0bea4bb8ee91a14fd415eb2a8eae57c610b5">kSwTimerChannelIsDisable</a> = 0x02, 
<a class="el" href="group__sw__timer.html#gga44b572e8abe4da32037ad911b133f0bea38fb994fa8e94a6d4481aee3aee7943e">kSwTimerChannelNotAvailable</a> = 0xFF
 }</td></tr>
<tr class="separator:ga44b572e8abe4da32037ad911b133f0be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab8c4026a7bceba5518af412d2d289c9c"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sw__timer.html#gab8c4026a7bceba5518af412d2d289c9c">_sw_timer_errors</a> { <a class="el" href="group__sw__timer.html#ggab8c4026a7bceba5518af412d2d289c9caab7c18ff1b7358fc892f275d3a0702c1">kSwTimerStatusSuccess</a>, 
<a class="el" href="group__sw__timer.html#ggab8c4026a7bceba5518af412d2d289c9ca89b47823684a90940d1eccf3ee9407f9">kSwTimerStatusFail</a>, 
<a class="el" href="group__sw__timer.html#ggab8c4026a7bceba5518af412d2d289c9cae3ac3f7f169fff145d07a271193af420">kSwTimerStatusInvalidChannel</a>
 }</td></tr>
<tr class="separator:gab8c4026a7bceba5518af412d2d289c9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8eb74c42765e0114fb15920babe0db28"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sw__timer.html#ga8eb74c42765e0114fb15920babe0db28">sw_timer_timeouts</a> { <b>kSwTimerMaxTimeout</b> = 2147483647
 }</td></tr>
<tr class="separator:ga8eb74c42765e0114fb15920babe0db28"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga3c3614b044470b0fbaf07fe74b061406"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sw__timer.html#ga3c3614b044470b0fbaf07fe74b061406">sw_timer_init_service</a> (void)</td></tr>
<tr class="memdesc:ga3c3614b044470b0fbaf07fe74b061406"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the software timer module. Prepares variables and HAL layer to provide timer services. Starts the free running counter which will be available to get its value any time while the service is running; it is useful whenever a module wants to keep track of time, but do not wants to reserve a channel.  <a href="#ga3c3614b044470b0fbaf07fe74b061406">More...</a><br /></td></tr>
<tr class="separator:ga3c3614b044470b0fbaf07fe74b061406"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf9f4848ee97f18dbeceb31aded25ec5c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sw__timer.html#gaf9f4848ee97f18dbeceb31aded25ec5c">sw_timer_shutdown_service</a> (void)</td></tr>
<tr class="memdesc:gaf9f4848ee97f18dbeceb31aded25ec5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deinitializes the software timer module. Shutdown HAL layer, so no timer service can be provided after the execution of this function.  <a href="#gaf9f4848ee97f18dbeceb31aded25ec5c">More...</a><br /></td></tr>
<tr class="separator:gaf9f4848ee97f18dbeceb31aded25ec5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaeb2e62af95eb77e6b9427d78c3e02bdd"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sw__timer.html#gaeb2e62af95eb77e6b9427d78c3e02bdd">sw_timer_reserve_channel</a> (void)</td></tr>
<tr class="memdesc:gaeb2e62af95eb77e6b9427d78c3e02bdd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reserves a free timer channel to be used by any module and returns its identifier.  <a href="#gaeb2e62af95eb77e6b9427d78c3e02bdd">More...</a><br /></td></tr>
<tr class="separator:gaeb2e62af95eb77e6b9427d78c3e02bdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad704fb2eb92414b57e13df021591593d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__sw__timer.html#ga11c8ba265a273d5d3dda5e269163d3e7">sw_timer_channel_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sw__timer.html#gad704fb2eb92414b57e13df021591593d">sw_timer_get_channel_status</a> (uint8_t timerChannel)</td></tr>
<tr class="memdesc:gad704fb2eb92414b57e13df021591593d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the actual status of the given timer channel. The timer has to be previously started to return a valid status.  <a href="#gad704fb2eb92414b57e13df021591593d">More...</a><br /></td></tr>
<tr class="separator:gad704fb2eb92414b57e13df021591593d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga755aef7ee6f71dac4b4978a076b0c447"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sw__timer.html#ga755aef7ee6f71dac4b4978a076b0c447">sw_timer_start_channel</a> (uint8_t timerChannel, <a class="el" href="group__sw__timer.html#ga85b49889ff28c6bc6a5368a08b0f9650">time_counter_t</a> timeout)</td></tr>
<tr class="memdesc:ga755aef7ee6f71dac4b4978a076b0c447"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts the count down of the given timer channel. The timer channel has to be previously reserved.  <a href="#ga755aef7ee6f71dac4b4978a076b0c447">More...</a><br /></td></tr>
<tr class="separator:ga755aef7ee6f71dac4b4978a076b0c447"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7b71ad88ee7b0ef5d46b822a7b4ff2ea"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sw__timer.html#ga7b71ad88ee7b0ef5d46b822a7b4ff2ea">sw_timer_release_channel</a> (uint8_t timerChannel)</td></tr>
<tr class="memdesc:ga7b71ad88ee7b0ef5d46b822a7b4ff2ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Releases the given timer channel, so it can be used by someone else.  <a href="#ga7b71ad88ee7b0ef5d46b822a7b4ff2ea">More...</a><br /></td></tr>
<tr class="separator:ga7b71ad88ee7b0ef5d46b822a7b4ff2ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1831e6f6e86215c63e02b5c3ab51bf6c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__sw__timer.html#gaf131d055058588461e646ccea72592bc">time_free_counter_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sw__timer.html#ga1831e6f6e86215c63e02b5c3ab51bf6c">sw_timer_get_free_counter</a> (void)</td></tr>
<tr class="memdesc:ga1831e6f6e86215c63e02b5c3ab51bf6c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the current value of the free running counter. Any module can keep track of the time by reading this counter and calculates time difference. No reservation of timer channel is needed. Consider for calculations that when the counter overflows it will start from 0 again.  <a href="#ga1831e6f6e86215c63e02b5c3ab51bf6c">More...</a><br /></td></tr>
<tr class="separator:ga1831e6f6e86215c63e02b5c3ab51bf6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaabb732c0d372fe28a21b0b3d2c32e326"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sw__timer.html#gaabb732c0d372fe28a21b0b3d2c32e326">sw_timer_update_counters</a> (void)</td></tr>
<tr class="memdesc:gaabb732c0d372fe28a21b0b3d2c32e326"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is called every 1ms by the interruption and update count down values of all timer channels.  <a href="#gaabb732c0d372fe28a21b0b3d2c32e326">More...</a><br /></td></tr>
<tr class="separator:gaabb732c0d372fe28a21b0b3d2c32e326"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This module is used to interface with Abstract Timer HAL to generate periodical timeouts required through different modules of the AOA protocol. This block will be based on 1ms ticks for all the timeout calculations. The HAL Interface block used to communicate with this must have the same 1ms timeout configured. This module can generate different software timer channels based on the same 1ms. </p>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="ga11c8ba265a273d5d3dda5e269163d3e7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef enum <a class="el" href="group__sw__timer.html#ga44b572e8abe4da32037ad911b133f0be">SwTimerChannelStatus</a> <a class="el" href="group__sw__timer.html#ga11c8ba265a273d5d3dda5e269163d3e7">sw_timer_channel_status_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Definition of the possible status of a software channel timer. </p>

</div>
</div>
<a class="anchor" id="ga85b49889ff28c6bc6a5368a08b0f9650"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int32_t <a class="el" href="group__sw__timer.html#ga85b49889ff28c6bc6a5368a08b0f9650">time_counter_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Data type of the counter of each timer channel. If it is an int8_t the counter will count up to 127ms, int16_t up to 32767ms and int32_t up to 2147483647ms. </p>

</div>
</div>
<a class="anchor" id="gaf131d055058588461e646ccea72592bc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint32_t <a class="el" href="group__sw__timer.html#gaf131d055058588461e646ccea72592bc">time_free_counter_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Data type of the free running counter. This data type should be unsigned and will count up to 255ms if it is uint8_t, 65535ms for uint16_t and 4294967295ms for uint32_t. </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="gab8c4026a7bceba5518af412d2d289c9c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__sw__timer.html#gab8c4026a7bceba5518af412d2d289c9c">_sw_timer_errors</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>List of status and errors. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="ggab8c4026a7bceba5518af412d2d289c9caab7c18ff1b7358fc892f275d3a0702c1"></a>kSwTimerStatusSuccess&#160;</td><td class="fielddoc">
<p>The execution was successful. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ggab8c4026a7bceba5518af412d2d289c9ca89b47823684a90940d1eccf3ee9407f9"></a>kSwTimerStatusFail&#160;</td><td class="fielddoc">
<p>The execution failed. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ggab8c4026a7bceba5518af412d2d289c9cae3ac3f7f169fff145d07a271193af420"></a>kSwTimerStatusInvalidChannel&#160;</td><td class="fielddoc">
<p>The given channel is not valid. Valid channels are 0 to (SW_TIMER_NUMBER_CHANNELS - 1). </p>
</td></tr>
</table>

</div>
</div>
<a class="anchor" id="ga8eb74c42765e0114fb15920babe0db28"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__sw__timer.html#ga8eb74c42765e0114fb15920babe0db28">sw_timer_timeouts</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Max timeout value according to size of the time counter </p>

</div>
</div>
<a class="anchor" id="ga44b572e8abe4da32037ad911b133f0be"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__sw__timer.html#ga44b572e8abe4da32037ad911b133f0be">SwTimerChannelStatus</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Definition of the possible status of a software channel timer. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="gga44b572e8abe4da32037ad911b133f0beaccc7b14e60e47ddac04fd489a4d17cf0"></a>kSwTimerChannelExpired&#160;</td><td class="fielddoc">
<p>Indicates the timer channel has counted the given ms </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="gga44b572e8abe4da32037ad911b133f0bea52d9aacf178b2dcb1bb96a73b5dac3ef"></a>kSwTimerChannelStillCounting&#160;</td><td class="fielddoc">
<p>Indicates the timeout of the channel has not expired and the timer is still counting. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="gga44b572e8abe4da32037ad911b133f0bea4bb8ee91a14fd415eb2a8eae57c610b5"></a>kSwTimerChannelIsDisable&#160;</td><td class="fielddoc">
<p>Indicates the timer channel is not reserved. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="gga44b572e8abe4da32037ad911b133f0bea38fb994fa8e94a6d4481aee3aee7943e"></a>kSwTimerChannelNotAvailable&#160;</td><td class="fielddoc">
<p>Indicates there are not available channels to reserve or the requested channel is not available. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gad704fb2eb92414b57e13df021591593d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__sw__timer.html#ga11c8ba265a273d5d3dda5e269163d3e7">sw_timer_channel_status_t</a> sw_timer_get_channel_status </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>timerChannel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the actual status of the given timer channel. The timer has to be previously started to return a valid status. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timerChannel</td><td>[in] Indicates the timer channel which status is going to be returned.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>sw_timer_channel_status_t Current status of the given timer channel. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">kSwTimerChannelExpired</td><td>Indicates the timer channel has counted the given ms. </td></tr>
    <tr><td class="paramname">kSwTimerChannelStillCounting</td><td>Indicates the timeout of the channel has not expired and the timer is still counting. </td></tr>
    <tr><td class="paramname">kSwTimerChannelIsDisable</td><td>Indicates the timer channel is not reserved. </td></tr>
    <tr><td class="paramname">kSwTimerChannelNotAvailable</td><td>Indicates the timer channel is invalid. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga1831e6f6e86215c63e02b5c3ab51bf6c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__sw__timer.html#gaf131d055058588461e646ccea72592bc">time_free_counter_t</a> sw_timer_get_free_counter </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the current value of the free running counter. Any module can keep track of the time by reading this counter and calculates time difference. No reservation of timer channel is needed. Consider for calculations that when the counter overflows it will start from 0 again. </p>
<dl class="section return"><dt>Returns</dt><dd>time_free_counter_t Returns current count of the free running counter. </dd></dl>

</div>
</div>
<a class="anchor" id="ga3c3614b044470b0fbaf07fe74b061406"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t sw_timer_init_service </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the software timer module. Prepares variables and HAL layer to provide timer services. Starts the free running counter which will be available to get its value any time while the service is running; it is useful whenever a module wants to keep track of time, but do not wants to reserve a channel. </p>
<dl class="section return"><dt>Returns</dt><dd>status_t Returns software timer status after initialization. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">kSwTimerStatusSuccess</td><td>The initialization was successful and the software timer is ready to provide services. </td></tr>
    <tr><td class="paramname">kSwTimerStatusFail</td><td>The initialization failed. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga7b71ad88ee7b0ef5d46b822a7b4ff2ea"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t sw_timer_release_channel </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>timerChannel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Releases the given timer channel, so it can be used by someone else. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timerChannel</td><td>[in] Identifier of the timer channel.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status_t Reports failures in the execution of the function. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">kSwTimerStatusSuccess</td><td>A channel was released successfully. </td></tr>
    <tr><td class="paramname">kSwTimerStatusInvalidChannel</td><td>The timer channel is invalid, it does not exist. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gaeb2e62af95eb77e6b9427d78c3e02bdd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t sw_timer_reserve_channel </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reserves a free timer channel to be used by any module and returns its identifier. </p>
<dl class="section return"><dt>Returns</dt><dd>uint8_t Returns the number of the channel that was reserved. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Any</td><td>value between 0 and SW_TIMER_NUMBER_CHANNELS is a valid channel. It indicates the channel was reserved and can be used. </td></tr>
    <tr><td class="paramname">kSwTimerChannelNotAvailable</td><td>If there is not any available channel, because all channels are already reserved. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gaf9f4848ee97f18dbeceb31aded25ec5c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sw_timer_shutdown_service </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deinitializes the software timer module. Shutdown HAL layer, so no timer service can be provided after the execution of this function. </p>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

</div>
</div>
<a class="anchor" id="ga755aef7ee6f71dac4b4978a076b0c447"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t sw_timer_start_channel </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>timerChannel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__sw__timer.html#ga85b49889ff28c6bc6a5368a08b0f9650">time_counter_t</a>&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Starts the count down of the given timer channel. The timer channel has to be previously reserved. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timerChannel</td><td>[in] Indicates the timer channel that is going to be started. </td></tr>
    <tr><td class="paramname">timeout</td><td>[in] Time in ms that the timer channel will count. The timeout should be a multiple of count unit of the timer, otherwise it will be taken the integer part of the division and the exact count will not be achieved</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status_t Reports failures in the execution of the function. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">kSwTimerStatusSuccess</td><td>A channel was started successfully. </td></tr>
    <tr><td class="paramname">kSwTimerStatusInvalidChannel</td><td>The timer channel is invalid, it does not exist. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gaabb732c0d372fe28a21b0b3d2c32e326"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sw_timer_update_counters </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function is called every 1ms by the interruption and update count down values of all timer channels. </p>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
